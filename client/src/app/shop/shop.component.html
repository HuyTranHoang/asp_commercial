<div class="container">
  <div class="row gap-3">
    <section class="col-3 bg-body-secondary rounded p-3">
      <app-filter *ngIf="brands$ | async as brands"
                  [items]="brands"
                  [title]="'Brand'"
                  [selectedItemId]="userParams?.brandId ?? 0"
                  (itemSelected)="onBrandSelected($event)">
      </app-filter>

      <app-filter *ngIf="types$ | async as types"
                  [items]="types"
                  [title]="'Type'"
                  [selectedItemId]="userParams?.typeId ?? 0"
                  (itemSelected)="onTypeSelected($event)">
      </app-filter>
    </section>

    <section class="col bg-body-secondary rounded">

      <div class="d-flex justify-content-between">
        <div class="d-flex align-items-center">
          <h5 class="text-primary my-3 me-3 filter-label">Sort</h5>
          <select class="form-select form-select-sm" style="width: 300px">
            <option *ngFor="let sort of sortList" [value]="sort.value" (click)="onSortSelected(sort.value)"
                    class="text-body">
              {{sort.display}}
            </option>
          </select>
        </div>

        <form class="d-flex align-items-center" (ngSubmit)="onSearch()">
          <button class="btn btn-sm me-3" style="background: #593196">
            <fa-icon [icon]="faRefresh" (click)="onResetSearch()" [style.color]="'#fff'" ></fa-icon>
          </button>
          <div class="d-flex align-items-center position-relative">
            <fa-icon class="position-absolute" style="right: 5px" [icon]="faSearch" (click)="onSearch()"
                    [ngStyle]="{  'cursor': 'pointer'}"></fa-icon>
            <input class="form-control form-control-sm" type="text" placeholder="Search..." [(ngModel)]="searchTerm" name="searchTerm">
          </div>
        </form>
      </div>

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3" *ngIf="products">
        <app-product-card *ngFor="let product of products" [product]="product"></app-product-card>
      </div>

      <div class="mt-3" *ngIf="products.length <= 0">
        <div class="alert alert-danger" role="alert">
          No product was found!
        </div>
      </div>
    </section>
  </div>
</div>


<div class="d-flex justify-content-center mt-3" *ngIf="pagination && products.length > 0">
  <pagination [boundaryLinks]="true"
              [totalItems]="pagination.totalItems"
              [itemsPerPage]="pagination.itemsPerPage"
              [maxSize]="10"
              [(ngModel)]="pagination.currentPage"
              (pageChanged)="pageChanged($event)"
              previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
  </pagination>
</div>

